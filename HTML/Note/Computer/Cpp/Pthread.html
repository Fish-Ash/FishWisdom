<!DOCTYPE html>

<html lang = "zh-cn">

    <head>
        <meta charset="utf-8">
        <title>Pandas</title>
        <link rel="stylesheet" href="../../../../CSS/style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML" async></script>
    </head>


    <body>
        <div class="header"><h1>不惑</h1></div>
        <ul class="navibar">
            <li><a href="../../../Home.html">主页</a></li>
            <li><a href="../../../Navigation.html">导航</a></li>
        </ul>

        <h1 lang="en">Pthread</h1>
        <b lang="en">Pthread</b>
        <p><span lang="en">POSIX</span>线程标准的具体实现</p>

        <b>进程</b>
        <p>操作系统分配资源的最小单位。</p>

        <b>线程</b>
        <p>是操作系统能够进行运算调度的最小单位，是包含在进程之中的实际运行单位。</p>
        <p>一条线程是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。</p>

        <b>线程的状态</b>
        <ul>
            <li>就绪<span lang="en">ready</span>：
            <p>线程等待可用的处理器</p></li>
        </ul>

        <ul>
            <li><b>深拷贝</b>：拷贝一个新对象，对其进行任何修改都不会影响原始对象。</li>
            <li><b>浅拷贝</b>：拷贝一个新对象，对其进行修改的同时原始对象也会进行相应的修改。</li>
        </ul>


        <b>线程池</b>：
        <p>线程池用于管理和重用一组线程，通过事先创建一定数量的线程，将其放入池中，等待任务分配，可以避免频繁地创建和销毁线程，提升性能和资源利用率。</p>
        <p>当有新的任务需要执行时，线程池会从池中取出一个空闲的线程来完成，任务完成后，线程会返回线程池，等待下一个任务。</p>
    </body>

    <h2>线程号</h2>
    <b>创建线程号</b>
    <pre class="code"><code>
        pthread_t tid;
    </code></pre>
    <b>获取当前线程号</b>
    <pre class="code"><code>
        tid = pthread_self();
    </code></pre>
    <b>比较两个线程号</b>
    <pre class="code"><code>
        pthread_equal(tid1, tid2);
    </code></pre>

    <h2>创建线程</h2>
    <pre class="code"><code>
        int pthread_create(
            pthread_t *thread,
            const pthread_attr_t *attr,
            void *(*start_rourine)(void *),
            void *arg
        )
    </code></pre>
    <table>
        <tr>
            <td lang="en">thread</td>
            <td>线程标识符地址</td>
        </tr>
        <tr>
            <td lang="en">attr</td>
            <td>线程属性结构体地址，通常设置为<span lang="en">NULL</span></td>
        </tr>
        <tr>
            <td lang="en">start_rourine</td>
            <td>线程函数的入口地址</td>
        </tr>
        <tr>
            <td lang="en">arg</td>
            <td>传给线程函数的参数</td>
        </tr>
    </table>


    <h2>互斥和同步</h2>

    <b>互斥</b>
    <p>当某个任务运行一个程序片段时，其他任务就不能运行它了。</p>

    <b>同步</b>
    <p>程序片段的运行必须严格按照规定的某种先后次序来运行。</p>



    <h3>信号量</h3>
    <p>公共资源数，p操作占用资源-1，v操作释放资源+1</p>

    <b>初始化信号量</b>
    <pre class="code"><code>
        int sem_init(sem_t *sem, int pshard, unsigned int value);
    </code></pre>

</html>